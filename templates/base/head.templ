package base

import "app/config"
import "app/config/routes"

type HeadParams struct {
	Title                 string
	Subtitle              string
	Description           string
	LoadJS                bool
	RobotsIndex           bool
	RobotsGoogleTranslate bool
}

const RedirectID = "redirect"
const datastarSrc = "https://cdn.jsdelivr.net/gh/starfederation/datastar@1.0.0-RC.7/bundles/datastar.js"

templ head(params HeadParams) {
	<head>
		<meta charset="utf-8"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0, interactive-widget=resizes-content"/>
		if params.Title != "" && params.Subtitle != "" {
			<title>{ params.Subtitle + " | " + params.Title }</title>
		} else if params.Title != "" {
			<title>{ params.Title }</title>
		} else if params.Subtitle != "" {
			<title>{ params.Subtitle + " | " + config.AppTitle }</title>
		} else {
			<title>{ config.AppTitle }</title>
		}
		if params.Description != "" {
			<meta name="description" content={ params.Description }/>
		}
		if !params.RobotsIndex {
			<meta name="robots" content="noindex"/>
		}
		if !params.RobotsGoogleTranslate {
			<meta name="googlebot" content="notranslate"/>
		}
		if params.LoadJS {
			<script type="module" src={ datastarSrc } async></script>
			<script src={ routes.Map[routes.Assets] + "js/index.js" } async></script>
		}
		<link rel="stylesheet" href={ routes.Map[routes.Assets] + "css/styles.css" }/>
		<link rel="icon" href="data:image/svg+xml,%3Csvg%20width%3D%22400%22%20height%3D%22400%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http://www.w3.org/2000/svg%22%3E%3Cdefs%3E%3ClinearGradient%20id%3D%22a%22%20x1%3D%220%25%22%20y1%3D%220%25%22%20x2%3D%22100%25%22%20y2%3D%22100%25%22%3E%3Cstop%20offset%3D%220%25%22%20stop-color%3D%22%23d9ed92%22/%3E%3Cstop%20offset%3D%2250%25%22%20stop-color%3D%22%2352b69a%22/%3E%3Cstop%20offset%3D%22100%25%22%20stop-color%3D%22%23004952%22/%3E%3C/linearGradient%3E%3C/defs%3E%3Cpath%20d%3D%22M5%200H4v3H3v3H2v3H1v3H0v4h2v-2h1v-1h1v-1h1v1h1v1h1v2h2v-4H8V9H7V6H6V3H5m11%2013h-6V0h1v4h1v4h1v4h3z%22%20fill%3D%22url(%23a)%22/%3E%3C/svg%3E" type="image/svg+xml"/>
		<!--
      <link rel="apple-touch-icon" sizes="180x180" href={ routes.Map[routes.Assets] + "favicon/apple-touch-icon.png" }/>
      <link rel="icon" type="image/png" sizes="32x32" href={ routes.Map[routes.Assets] + "favicon/favicon-32x32.png" }/>
      <link rel="icon" type="image/png" sizes="16x16" href={ routes.Map[routes.Assets] + "favicon/favicon-16x16.png" }/>
      <link rel="manifest" href={ routes.Map[routes.Assets] + "manifest.json" }/>
      -->
	</head>
}
